{"version":3,"sources":["webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/assign.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./src/views/admins.vue?745f","webpack:///src/views/admins.vue","webpack:///./src/views/admins.vue?4198","webpack:///./src/views/admins.vue"],"names":["module","exports","__webpack_require__","Object","assign","getKeys","gOPS","pIE","toObject","IObject","$assign","A","B","S","Symbol","K","split","forEach","k","keys","join","target","source","T","aLen","arguments","length","index","getSymbols","f","isEnum","key","concat","j","call","$export","F","render","_vm","this","_h","$createElement","_c","_self","staticStyle","width","attrs","data","tableData","type","label","scopedSlots","_u","fn","scope","margin-left","_v","_s","_f","row","date","prop","border-radius","src","avatar","alt","height","istatus","_e","size","on","click","$event","handleEdit","$index","handleDelete","float","margin","background","layout","total","page-size","pageSize","current-change","changePageSize","title","visible","dialogVisible","update:visible","ref","staticClass","model","ruleForm","status-icon","rules","label-width","readonly","autocomplete","value","callback","$$v","$set","expression","placeholder","slot","submitForm","staticRenderFns","bcrypt","adminsvue_type_script_lang_js_","name","_this","validatePass","rule","pass","validatePass2","Error","checkPass","oldPwds","console","log","compare","password","err","pwd","page","oldPwd","required","message","trigger","email","validator","created","getList","methods","_this2","$axios","get","params","then","res","status","result","docs","assign_default","_this3","id","_id","$message","success","catch","error","formName","_this4","$refs","validate","valid","post","views_adminsvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"static/js/chunk-5f6810e6.3487c9a2.js","sourcesContent":["module.exports = require(\"core-js/library/fn/object/assign\");","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"width\":\"50\"}}),_c('el-table-column',{attrs:{\"label\":\"日期\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(_vm._f(\"fromTime\")(scope.row.date)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"用户ID\",\"width\":\"180\",\"prop\":\"_id\"}}),_c('el-table-column',{attrs:{\"label\":\"姓名\",\"width\":\"180\",\"prop\":\"name\"}}),_c('el-table-column',{attrs:{\"label\":\"用户头像\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticStyle:{\"border-radius\":\"50%\"},attrs:{\"src\":scope.row.avatar,\"alt\":\"\",\"width\":\"80px\",\"height\":\"80px\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"用户邮箱\",\"width\":\"180\",\"prop\":\"email\"}}),_c('el-table-column',{attrs:{\"label\":\"用户身份\",\"width\":\"180\",\"prop\":\"email\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.istatus==0)?_c('el-button',{attrs:{\"type\":\"text\"}},[_vm._v(\"管理员\")]):_vm._e(),(scope.row.istatus==1)?_c('el-button',{attrs:{\"type\":\"text\"}},[_vm._v(\"普通用户\")]):_vm._e(),(scope.row.istatus==3)?_c('el-button',{attrs:{\"type\":\"text\"}},[_vm._v(\"小助手\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{staticStyle:{\"float\":\"right\",\"margin\":\"20px 0\"},attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.total,\"page-size\":_vm.pageSize},on:{\"current-change\":_vm.changePageSize}}),_c('el-dialog',{attrs:{\"title\":\"用户信息修改\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{ref:\"ruleForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.ruleForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户ID\",\"prop\":\"_id\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"readonly\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm._id),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"_id\", $$v)},expression:\"ruleForm._id\"}})],1),_c('el-form-item',{attrs:{\"label\":\"账户名\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"readonly\":\"\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.name),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"name\", $$v)},expression:\"ruleForm.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"用户身份\",\"prop\":\"istatus\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择身份\"},model:{value:(_vm.ruleForm.istatus),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"istatus\", $$v)},expression:\"ruleForm.istatus\"}},[_c('el-option',{attrs:{\"label\":\"普通用户\",\"value\":\"1\"}}),_c('el-option',{attrs:{\"label\":\"管理员\",\"value\":\"0\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.email),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"email\", $$v)},expression:\"ruleForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"pass\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.pass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"pass\", $$v)},expression:\"ruleForm.pass\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"checkPass\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\"},model:{value:(_vm.ruleForm.checkPass),callback:function ($$v) {_vm.$set(_vm.ruleForm, \"checkPass\", $$v)},expression:\"ruleForm.checkPass\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('ruleForm')}}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <el-table :data=\"tableData\" style=\"width: 100%\">\r\n            <el-table-column type=\"index\" width=\"50\"></el-table-column>\r\n            <el-table-column label=\"日期\" width=\"180\">\r\n                <template slot-scope=\"scope\">\r\n                    <span style=\"margin-left: 10px\">{{ scope.row.date | fromTime }}</span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"用户ID\" width=\"180\" prop=\"_id\"></el-table-column>\r\n            <el-table-column label=\"姓名\" width=\"180\" prop=\"name\"></el-table-column>\r\n            <el-table-column label=\"用户头像\" width=\"180\">\r\n                <template slot-scope=\"scope\">\r\n                    <img\r\n                        :src=\"scope.row.avatar\"\r\n                        alt\r\n                        width=\"80px\"\r\n                        height=\"80px\"\r\n                        style=\"border-radius: 50%;\"\r\n                    />\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"用户邮箱\" width=\"180\" prop=\"email\"></el-table-column>\r\n            <el-table-column label=\"用户身份\" width=\"180\" prop=\"email\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button v-if=\"scope.row.istatus==0\" type=\"text\">管理员</el-button>\r\n                    <el-button v-if=\"scope.row.istatus==1\" type=\"text\">普通用户</el-button>\r\n                    <el-button v-if=\"scope.row.istatus==3\" type=\"text\">小助手</el-button>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">编辑</el-button>\r\n                    <el-button\r\n                        size=\"mini\"\r\n                        type=\"danger\"\r\n                        @click=\"handleDelete(scope.$index, scope.row)\"\r\n                    >删除</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-pagination\r\n            style=\"float: right;margin: 20px 0;\"\r\n            background\r\n            layout=\"prev, pager, next\"\r\n            @current-change=\"changePageSize\"\r\n            :total=\"total\"\r\n            :page-size=\"pageSize\"\r\n        ></el-pagination>\r\n\r\n        <!--编辑-->\r\n        <el-dialog title=\"用户信息修改\" :visible.sync=\"dialogVisible\" width=\"30%\">\r\n            <el-form\r\n                :model=\"ruleForm\"\r\n                status-icon\r\n                :rules=\"rules\"\r\n                ref=\"ruleForm\"\r\n                label-width=\"100px\"\r\n                class=\"demo-ruleForm\"\r\n            >\r\n                <el-form-item label=\"用户ID\" prop=\"_id\">\r\n                    <el-input type=\"text\" readonly v-model=\"ruleForm._id\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"账户名\" prop=\"name\">\r\n                    <el-input type=\"text\" readonly v-model=\"ruleForm.name\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"用户身份\" prop=\"istatus\">\r\n                    <el-select v-model=\"ruleForm.istatus\" placeholder=\"请选择身份\">\r\n                        <el-option label=\"普通用户\" value=\"1\"></el-option>\r\n                        <el-option label=\"管理员\" value=\"0\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"邮箱\" prop=\"email\">\r\n                    <el-input type=\"text\" v-model=\"ruleForm.email\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <!-- <el-form-item label=\"旧密码\" prop=\"oldPwd\">\r\n                    <el-input type=\"password\" v-model=\"ruleForm.oldPwd\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>-->\r\n                <el-form-item label=\"密码\" prop=\"pass\">\r\n                    <el-input type=\"password\" v-model=\"ruleForm.pass\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"确认密码\" prop=\"checkPass\">\r\n                    <el-input type=\"password\" v-model=\"ruleForm.checkPass\" autocomplete=\"off\"></el-input>\r\n                </el-form-item>\r\n                <!--<el-form-item label=\"用户身份\" prop=\"istatus\">\r\n\t\t\t    <el-input v-model=\"ruleForm.istatus\"></el-input>\r\n                </el-form-item>-->\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n                <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n                <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">确 定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nvar bcrypt = require(\"bcryptjs\");\r\n\r\nexport default {\r\n    name: \"admins\",\r\n    data() {\r\n        var validatePass = (rule, value, callback) => {\r\n            if (value != \"\") {\r\n                this.ruleForm.pass = value;\r\n                callback();\r\n            }\r\n        };\r\n        var validatePass2 = (rule, value, callback) => {\r\n            if (value != \"\" && this.ruleForm.pass == value) {\r\n                this.ruleForm.checkPass = value;\r\n                callback();\r\n            } else {\r\n                return callback(new Error(\"两次密码不一致\"));\r\n            }\r\n        };\r\n        var oldPwds = (rule, value, callback) => {\r\n            console.log(value);\r\n            if (value) {\r\n                bcrypt.compare(value, this.ruleForm.password, function(\r\n                    err,\r\n                    pwd\r\n                ) {\r\n                    if (!pwd) {\r\n                        return callback(\r\n                            new Error(\"输入的密码与原始密码不一致\")\r\n                        );\r\n                    } else {\r\n                        callback();\r\n                    }\r\n                });\r\n            } else {\r\n                callback();\r\n            }\r\n        };\r\n        return {\r\n            page: 1,\r\n            pageSize: 10,\r\n            total: 0,\r\n            istatus: null,\r\n            tableData: [],\r\n            dialogVisible: false,\r\n            ruleForm: {\r\n                pass: \"\",\r\n                checkPass: \"\",\r\n                oldPwd: \"\"\r\n            },\r\n            rules: {\r\n                name: [\r\n                    {\r\n                        required: true,\r\n                        message: \"用户名不能为空\",\r\n                        trigger: \"blur\"\r\n                    }\r\n                ],\r\n\r\n                email: [\r\n                    { required: true, message: \"邮箱不能为空\", trigger: \"blur\" }\r\n                ],\r\n                pass: [{ validator: validatePass, trigger: \"blur\" }],\r\n                checkPass: [{ validator: validatePass2, trigger: \"blur\" }],\r\n                oldPwd: [{ validator: oldPwds, trigger: \"blur\" }]\r\n            }\r\n        };\r\n    },\r\n    created() {\r\n        this.getList();\r\n    },\r\n    methods: {\r\n        getList() {\r\n            this.$axios\r\n                .get(\"/api/users\", {\r\n                    params: {\r\n                        page: this.page,\r\n                        pageSize: this.pageSize,\r\n                        istatus: this.istatus\r\n                    }\r\n                })\r\n                .then(res => {\r\n                    if (res.data.status == 0) {\r\n                        this.tableData = res.data.result.docs;\r\n                        this.total = res.data.result.total;\r\n                    }\r\n                });\r\n        },\r\n        handleEdit(index, row) {\r\n            this.dialogVisible = true;\r\n            console.log(row);\r\n            this.ruleForm = Object.assign({}, row);\r\n        },\r\n        handleDelete(index, row) {\r\n            this.$axios\r\n                .get(\"/api/users/delete\", {\r\n                    params: {\r\n                        id: row._id\r\n                    }\r\n                })\r\n                .then(res => {\r\n                    if (res.data.status == 0) {\r\n                        this.getList();\r\n                        this.$message.success(\"删除成功\");\r\n                    }\r\n                })\r\n                .catch(error => {\r\n                    this.$message.error(error);\r\n                });\r\n        },\r\n        changePageSize(index) {\r\n            this.page = index;\r\n            this.getList();\r\n        },\r\n        submitForm(formName) {\r\n            this.$refs[formName].validate(valid => {\r\n                if (valid) {\r\n                    //\r\n\r\n                    this.$axios\r\n                        .post(\"/api/users/update\", this.ruleForm)\r\n                        .then(res => {\r\n                            if (res.data.status == 0) {\r\n                                this.dialogVisible = false;\r\n                                this.getList();\r\n                                this.$message.success(\"修改成功\");\r\n                            } else {\r\n                                this.$message.error(\"修改失败\");\r\n                            }\r\n                        });\r\n                } else {\r\n                    console.log(\"error submit!!\");\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./admins.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./admins.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./admins.vue?vue&type=template&id=46b9d187&\"\nimport script from \"./admins.vue?vue&type=script&lang=js&\"\nexport * from \"./admins.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}