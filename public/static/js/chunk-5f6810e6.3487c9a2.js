(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f6810e6"],{5176:function(t,e,a){t.exports=a("51b6")},"51b6":function(t,e,a){a("a3c3"),t.exports=a("584a").Object.assign},9306:function(t,e,a){"use strict";var l=a("c3a1"),r=a("9aa9"),s=a("355d"),o=a("241e"),i=a("335c"),n=Object.assign;t.exports=!n||a("294c")(function(){var t={},e={},a=Symbol(),l="abcdefghijklmnopqrst";return t[a]=7,l.split("").forEach(function(t){e[t]=t}),7!=n({},t)[a]||Object.keys(n({},e)).join("")!=l})?function(t,e){var a=o(t),n=arguments.length,u=1,c=r.f,p=s.f;while(n>u){var m,d=i(arguments[u++]),f=c?l(d).concat(c(d)):l(d),b=f.length,g=0;while(b>g)p.call(d,m=f[g++])&&(a[m]=d[m])}return a}:n},a3c3:function(t,e,a){var l=a("63b6");l(l.S+l.F,"Object",{assign:a("9306")})},d0f7:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{label:"日期",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t._f("fromTime")(e.row.date)))])]}}])}),a("el-table-column",{attrs:{label:"用户ID",width:"180",prop:"_id"}}),a("el-table-column",{attrs:{label:"姓名",width:"180",prop:"name"}}),a("el-table-column",{attrs:{label:"用户头像",width:"180"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{"border-radius":"50%"},attrs:{src:t.row.avatar,alt:"",width:"80px",height:"80px"}})]}}])}),a("el-table-column",{attrs:{label:"用户邮箱",width:"180",prop:"email"}}),a("el-table-column",{attrs:{label:"用户身份",width:"180",prop:"email"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.istatus?a("el-button",{attrs:{type:"text"}},[t._v("管理员")]):t._e(),1==e.row.istatus?a("el-button",{attrs:{type:"text"}},[t._v("普通用户")]):t._e(),3==e.row.istatus?a("el-button",{attrs:{type:"text"}},[t._v("小助手")]):t._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{float:"right",margin:"20px 0"},attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.pageSize},on:{"current-change":t.changePageSize}}),a("el-dialog",{attrs:{title:"用户信息修改",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"",rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户ID",prop:"_id"}},[a("el-input",{attrs:{type:"text",readonly:"",autocomplete:"off"},model:{value:t.ruleForm._id,callback:function(e){t.$set(t.ruleForm,"_id",e)},expression:"ruleForm._id"}})],1),a("el-form-item",{attrs:{label:"账户名",prop:"name"}},[a("el-input",{attrs:{type:"text",readonly:"",autocomplete:"off"},model:{value:t.ruleForm.name,callback:function(e){t.$set(t.ruleForm,"name",e)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"用户身份",prop:"istatus"}},[a("el-select",{attrs:{placeholder:"请选择身份"},model:{value:t.ruleForm.istatus,callback:function(e){t.$set(t.ruleForm,"istatus",e)},expression:"ruleForm.istatus"}},[a("el-option",{attrs:{label:"普通用户",value:"1"}}),a("el-option",{attrs:{label:"管理员",value:"0"}})],1)],1),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"pass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.pass,callback:function(e){t.$set(t.ruleForm,"pass",e)},expression:"ruleForm.pass"}})],1),a("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},r=[],s=a("5176"),o=a.n(s),i=a("048c"),n={name:"admins",data:function(){var t=this,e=function(e,a,l){""!=a&&(t.ruleForm.pass=a,l())},a=function(e,a,l){if(""==a||t.ruleForm.pass!=a)return l(new Error("两次密码不一致"));t.ruleForm.checkPass=a,l()},l=function(e,a,l){console.log(a),a?i.compare(a,t.ruleForm.password,function(t,e){if(!e)return l(new Error("输入的密码与原始密码不一致"));l()}):l()};return{page:1,pageSize:10,total:0,istatus:null,tableData:[],dialogVisible:!1,ruleForm:{pass:"",checkPass:"",oldPwd:""},rules:{name:[{required:!0,message:"用户名不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱不能为空",trigger:"blur"}],pass:[{validator:e,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}],oldPwd:[{validator:l,trigger:"blur"}]}}},created:function(){this.getList()},methods:{getList:function(){var t=this;this.$axios.get("/api/users",{params:{page:this.page,pageSize:this.pageSize,istatus:this.istatus}}).then(function(e){0==e.data.status&&(t.tableData=e.data.result.docs,t.total=e.data.result.total)})},handleEdit:function(t,e){this.dialogVisible=!0,console.log(e),this.ruleForm=o()({},e)},handleDelete:function(t,e){var a=this;this.$axios.get("/api/users/delete",{params:{id:e._id}}).then(function(t){0==t.data.status&&(a.getList(),a.$message.success("删除成功"))}).catch(function(t){a.$message.error(t)})},changePageSize:function(t){this.page=t,this.getList()},submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$axios.post("/api/users/update",e.ruleForm).then(function(t){0==t.data.status?(e.dialogVisible=!1,e.getList(),e.$message.success("修改成功")):e.$message.error("修改失败")})})}}},u=n,c=a("2877"),p=Object(c["a"])(u,l,r,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-5f6810e6.3487c9a2.js.map